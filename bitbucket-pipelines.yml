pipelines:
  tags:
    '*':
      - step:
          services:
            - docker
          script: 
            - docker build -t concepting/database-backup:${BITBUCKET_TAG} .
            - docker login -u ${DOCKER_USERNAME} -p ${DOCKER_PASSWORD}
            - docker push concepting/database-backup:${BITBUCKET_TAG}
  default:
    - step:
        services:
          - docker
        script: 
          - docker build -t concepting/database-backup:latest .
          - docker login -u ${DOCKER_USERNAME} -p ${DOCKER_PASSWORD}
          - docker push concepting/database-backup:latest 